[build]
  # 1. Start the build from the client folder
  base = "client"

  # 2. Command to install Vite and build the site
  command = "npm install --include=dev && npm run build:client"

  # 3. Path relative to the base directory above.
  # Vite is outputting to 'dist/spa' inside the client folder.
  publish = "client/"

[build.environment]
  NODE_VERSION = "20"
  NPM_FLAGS = "--include=dev"

[[redirects]]
  # This fixes the common 404 error when refreshing a React Router page
  from = "/*"
  to = "/index.html"
  status = 200
